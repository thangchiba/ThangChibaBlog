---
title: 'Máº¥y con cÃ¡ vÃ ng giÃºp mÃ¬nh báº£o vá»‡ há»‡ thá»‘ng tháº¿ nÃ o?'
date: '2024-04-04'
tags: ['admin', 'thangchiba']
draft: false
summary: 'Báº¡n cÃ³ tháº¯c máº¯c mÃ¡y tÃ­nh cÃ³ thá»ƒ thá»±c sá»± táº¡o ra Ä‘Æ°á»£c sá»‘ ngáº«u nhiÃªn khÃ´ng? LÃ m sao máº¥y con cÃ¡ vÃ ng vÃ´ tri láº¡i cÃ³ thá»ƒ giÃºp mÃ¬nh táº¡o Ä‘Æ°á»£c mÃ£ ngáº«u nhiÃªn Ä‘á»ƒ chá»‘ng bá»‹ hack quy luáº­t táº¡o mÃ£? ÄÃ¢y cÅ©ng lÃ  cÃ¡ch mÃ  CloudFlare Ä‘ang lÃ m Ä‘á»ƒ báº£o vá»‡ má»™t pháº§n lá»›n traffic internet trÃªn tháº¿ giá»›i nÃ y.'
images: ['/static/images/road.jpg']
audioURL: '/static/audio/blog/random-generator-vi.mp3'
authors: ['default']
---

import RandomGenerator from './utils/RandomGenerator/index.tsx'

### Bá»‘i cáº£nh

Gáº§n Ä‘Ã¢y mÃ¬nh cáº§n giáº£i quyáº¿t váº¥n Ä‘á» cho game cá»§a mÃ¬nh Ä‘Ã³ lÃ  tÃ­nh ngáº«u nhiÃªn.

Cháº¯c cháº¯n rá»“i! TÃ­nh ngáº«u nhiÃªn ráº¥t quan trá»ng trong game, nÃ³ lÃ m game trá»Ÿ lÃªn thÃº vá»‹. ÄÃ³ lÃ  lÃ­ do Gacha hÃºt mÃ¡u vÃ  Pachinko á»Ÿ Nháº­t sá»‘ng ráº¥t khoáº» :))).

NgoÃ i ra cÃ²n cÃ³ nhá»¯ng khi mÃ¬nh cáº§n táº¡o secret-key cho client request tá»›i server cá»§a mÃ¬nh. ğŸ”

VÃ¬ váº­y mÃ¬nh cáº§n táº¡o ra 1 service cÃ³ thá»ƒ xÃ i chung giá»¯a game vÃ  cÃ¡c app khÃ¡c cá»§a mÃ¬nh, nÃ³ pháº£i Ä‘áº£m báº£o Ä‘Æ°á»£c traffic cao vÃ  tÃ­nh báº£o máº­t tá»‘t.( khÃ³ ğŸ¥²)

### MÃ¡y tÃ­nh cÃ³ thá»±c sá»± táº¡o Ä‘Æ°á»£c sá»‘ ngáº«u nhiÃªn?

MÃ¬nh luÃ´n tháº¯c máº¯c liá»‡u mÃ¡y tÃ­nh cÃ³ thá»±c sá»± táº¡o Ä‘Æ°á»£c sá»‘ Random khÃ´ng? Bá»Ÿi báº£n cháº¥t nÃ³ cháº¡y dá»±a vÃ o nhá»¯ng bit 0 vÃ  1, chÃºng ta cáº§n input Ä‘á»ƒ nÃ³ cho ra output. VÃ  quáº£ tháº­t Ä‘a sá»‘ cÃ¡c thuáº­t toÃ¡n táº¡o sá»‘, chuá»—i ngáº«u nhiÃªn Ä‘á»u lÃ  Ä‘Æ°á»£c táº¡o dá»±a vÃ o thá»i gian cá»§a mÃ¡y tÃ­nh vÃ  má»™t sá»‘ phÃ©p tÃ­nh phá»©c táº¡p. Vá» máº·t lÃ½ thuyáº¿t nÃ³ hoÃ n toÃ n cÃ³ thá»ƒ Ä‘oÃ¡n Ä‘Æ°á»£c quy luáº­t.

Trong thá»±c táº¿ cÅ©ng cÃ³ nhá»¯ng bÃ i viáº¿t Ä‘Ã£ prediction Ä‘Æ°á»£c thuáº­t toÃ¡n random cá»§a JS/V8 nhÆ° :

https://www.youtube.com/watch?v=-h_rj2-HP2E

Äiá»u Ä‘Ã³ sáº½ ráº¥t kinh khá»§ng náº¿u hacker náº¯m Ä‘Æ°á»£c quy luáº­t táº¡o random secret key cá»§a báº¡n.

VÃ¬ váº­y mÃ  chÃºng ta cáº§n má»™t thá»© gÃ¬ Ä‘Ã³ khÃ´ng trong vÃ²ng Ä‘á»i cá»§a mÃ¡y tÃ­nh, má»™t thá»© gÃ¬ Ä‘Ã³ ráº¥t Ä‘á»i thÆ°á»ng vÃ  ngáº«u nhiÃªn ^^.

### Giáº£i phÃ¡p

Äá»ƒ má»™t thuáº­t toÃ¡n táº¡o mÃ£ Ä‘áº¡t tiÃªu chuáº©n( cá»§a mÃ¬nh ) thÃ¬ cáº§n nhá»¯ng yáº¿u tá»‘ sau :

1. **KhÃ³ dá»± Ä‘oÃ¡n**: KhÃ´ng thá»ƒ dá»± Ä‘oÃ¡n giÃ¡ trá»‹ tiáº¿p theo dá»±a vÃ o cÃ¡c giÃ¡ trá»‹ trÆ°á»›c Ä‘Ã³, ngay cáº£ khi biáº¿t táº¥t cáº£ cÃ¡c giÃ¡ trá»‹ Ä‘Ã£ Ä‘Æ°á»£c sinh ra.
2. **Äá»™ Ä‘á»“ng Ä‘á»u**: CÃ¡c sá»‘ Ä‘Æ°á»£c sinh ra pháº£i phÃ¢n phá»‘i Ä‘á»u, tá»©c lÃ  má»—i sá»‘ cÃ³ cÃ¹ng kháº£ nÄƒng xuáº¥t hiá»‡n.
3. **KhÃ´ng thá»ƒ tÃ¡i táº¡o**: KhÃ´ng thá»ƒ tÃ¡i táº¡o láº¡i chuá»—i sá»‘ ngáº«u nhiÃªn, ngay cáº£ khi cÃ³ thÃ´ng tin vá» cÃ¡ch thá»©c hoáº¡t Ä‘á»™ng cá»§a thuáº­t toÃ¡n.

### YÃªu cáº§u

MÃ¬nh quyáº¿t Ä‘á»‹nh input cá»§a thuáº­t toÃ¡n ngáº«u nhiÃªn (CSRNGs) sáº½ lÃ  :

1. **Entropy tá»« há»‡ thá»‘ng**: Má»™t sá»‘ nguá»“n thÃ´ng tin chá»‰ cÃ³ phÃ­a server biáº¿t nhÆ° lÃ  MachineTime hay RequestID.
2. **Entropy tá»« mÃ´i trÆ°á»ng**: Tiáº¿ng á»“n cá»§a mÃ´i trÆ°á»ng xung quanh server, hÃ¬nh áº£nh sinh váº­t/khung cáº£nh Ä‘Æ°á»ng phá»‘,â€¦
3. **Seed ngáº«u nhiÃªn**: CSRNGs thÆ°á»ng báº¯t Ä‘áº§u vá»›i má»™t "seed" (giá»‘ng) ngáº«u nhiÃªn, má»™t giÃ¡ trá»‹ ban Ä‘áº§u Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ khá»Ÿi Ä‘á»™ng quÃ¡ trÃ¬nh sinh sá»‘. Seed nÃ y cáº§n pháº£i Ä‘á»§ ngáº«u nhiÃªn Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng chuá»—i sá»‘ Ä‘Æ°á»£c sinh ra khÃ´ng thá»ƒ dá»± Ä‘oÃ¡n Ä‘Æ°á»£c.
4. **Thu tháº­p entropy Ä‘á»‹nh ká»³**: Äá»ƒ duy trÃ¬ tÃ­nh ngáº«u nhiÃªn, CSRNGs cÃ³ thá»ƒ Ä‘á»‹nh ká»³ thu tháº­p thÃªm entropy tá»« há»‡ thá»‘ng vÃ  cáº­p nháº­t ná»™i tráº¡ng cá»§a chÃºng.
5. **Káº¿t há»£p cÃ¡c nguá»“n entropy**: Má»™t sá»‘ CSRNG sá»­ dá»¥ng nhiá»u nguá»“n entropy khÃ¡c nhau vÃ  káº¿t há»£p chÃºng Ä‘á»ƒ táº¡o ra output, lÃ m tÄƒng Ä‘á»™ phá»©c táº¡p vÃ  giáº£m kháº£ nÄƒng dá»± Ä‘oÃ¡n.

### Thá»±c thi

Vá»›i má»—i má»¥c á»Ÿ trÃªn mÃ¬nh sáº½ chá»n ra Ä‘áº¡i biá»ƒu.

1. MÃ¬nh chá»n thá»i gian mÃ¡y cá»§a server vÃ  **requestID** cá»§a client. Khi client gá»­i request Ä‘á»ƒ nháº­n sá»‘ ngáº«u nhiÃªn mÃ¬nh sáº½ tÄƒng **requestID** cá»§a user vÃ  láº¥y **thá»i gian hiá»‡n táº¡i cá»§a mÃ¡y chá»§** Ä‘á»ƒ lÃ m Seed.
2. MÃ¬nh quyáº¿t Ä‘á»‹nh dÃ¹ng camera chá»¥p láº¡i áº£nh. Sau khi cÃ³ dá»¯ liá»‡u táº¥m áº£nh mÃ¬nh sáº½ hash nÃ³ vá»›i SHA256 Ä‘á»ƒ táº¡o **hash string** (64char).
VÃ¬ kinh phÃ­ eo háº¹p nÃªn nhÃ  cÃ³ gÃ¬ xÃ i cÃ¡i Ä‘Ã³. CÃ³ cÃ¡i bá»ƒ cÃ¡ cháº¯c táº§m 2 chá»¥c con lá»›n bÃ© ğŸ³, chÃºng nÃ³ tung tÄƒng bÆ¡i lá»™i suá»‘t nÃªn kháº£ nÄƒng chá»¥p 2 táº¥m trÃ¹ng nhau lÃ  gáº§n nhÆ° ko cÃ³ (má»™t thay Ä‘á»•i ráº¥t nhá» nhÆ° tia sÃ¡ng khiáº¿n thay Ä‘á»•i mÃ u sáº¯c cá»§a 1 pixel trÃªn táº¥m áº£nh cÅ©ng Ä‘á»§ cho **hash string** hoÃ n toÃ n khÃ¡c Ä‘i). ğŸŒ
NgoÃ i ra vÃ¬ báº­t Ä‘Ã¨n bá»ƒ cÃ¡ cáº£ Ä‘Ãªm sá»£ tiá»n Ä‘iá»‡n hÃ ng thÃ¡ng vá»£ la nÃªn mÃ¬nh Ä‘á»ƒ **quáº£** **cáº§u** **plasma** á»Ÿ Ä‘áº±ng sau ná»¯a. Vá» tÃ­nh cháº¥t thÃ¬ cÃ¡i quáº£ cáº§u nÃ y nÃ³ cÅ©ng ráº¥t tÄƒng Ä‘á»™ng vÃ  khÃ³ Ä‘oÃ¡n nÃªn dÃ¹ng trong case nÃ y lÃ  trÃªn cáº£ há»£p lÃ­. Hehe. âš¡

3. Táº¥t nhiÃªn rá»“i, 1 **seed** ngáº«u nhiÃªn sáº½ Ä‘Æ°á»£c mÃ¬nh tá»•ng há»£p tá»« 1 vÃ  2 rá»“i sá»­ dá»¥ng cÃ¡c thuáº­t toÃ¡n táº¡o sá»‘ ngáº«u nhiÃªn nhÆ° bÃ¬nh thÆ°á»ng.
4. Chiáº¿c camera cÃ¹i cÃ¹i cÅ©ng 30fps. ğŸ“¸ NhÆ° váº­y náº¿u 1 giÃ¢y cÃ¡c báº¡n chá»¥p 30 láº§n tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i viá»‡c báº¡n thay Ä‘á»•i thuáº­t toÃ¡n táº¡o sá»‘ 30 láº§n 1 giÃ¢y má»™t cÃ¡ch tá»± Ä‘á»™ng vÃ  hoÃ n toÃ n khÃ¡ch quan. Waoo. NhÆ°ng mÃ¬nh nghÄ© mÃ¬nh chá»‰ cáº§n 1FPS thÃ´i lÃ  Ä‘á»§. Ai mÃ  thÃ¨m bá» cÃ´ng ra hack cÃ¡i server cÃ¹i báº¯p cá»§a mÃ¬nh cÆ¡ chá»© ^^. ğŸ”¥
5. MÃ¬nh nghÄ© nhiÃªu Ä‘Ã¢y lÃ  Ä‘á»§ vá»›i mÃ¬nh rá»“i. Tá»•ng há»£p láº¡i sáº½ lÃ  nhÆ° sau : MÃ¬nh sáº½ chá»¥p láº¡i má»—i giÃ¢y 1 bá»©c áº£nh â†’ Hash nÃ³ Ä‘Æ°á»£c 1 chuá»—i 64 kÃ­ tá»± â†’ Má»—i láº§n nháº­n request sáº½ dÃ¹ng mÃ£ Ä‘Ã³ + requestID vÃ  Server Time ( náº¿u cáº§n báº£o máº­t ) Ä‘á»ƒ lÃ m Seed rá»“i dÃ¹ng cÃ¡c thuáº­t toÃ¡n táº¡o ngáº«u nhiÃªn bÃ¬nh thÆ°á»ng.

### ÄÃ¡nh giÃ¡ káº¿t quáº£

KhÃ¡ á»•n ğŸ‘ğŸ».  CÃ¡c báº¡n cÅ©ng cÃ³ thá»ƒ thá»­ ngay táº¡i blog nÃ y mÃ¬nh ngá»“i code demo nhá»c quÃ¡ trá»i luÃ´n Ã¡. ğŸ˜­

<RandomGenerator />

Vá» cÆ¡ báº£n má»—i táº¥m áº£nh chá»¥p ra Ä‘á»u cÃ³ Ã­t nhiá»u khÃ¡c biá»‡t vá» Ã¡nh sÃ¡ng, cÃ¡c báº¡n cÃ³ thá»ƒ Ä‘á»ƒ cam chá»‰ lÃªn tráº§n nhÃ  vÃ  sáº½ tháº¥y mÃ£ váº«n Ä‘Æ°á»£c táº¡o bÃ¬nh thÆ°á»ng.

NHÆ¯NG khi cáº¯m camera xuá»‘ng bÃ n vÃ  má»i thá»© nhÃ¬n tháº¥y chá»‰ cÃ²n Ä‘en thui thÃ¬ chá»¥p bao táº¥m cÅ©ng ra 1 mÃ£ thÃ´i.

Vá» cÆ¡ báº£n thÃ¬ nÃ³ tháº­t sá»± khÃ³ Ä‘á»ƒ dá»± Ä‘oÃ¡n vÃ  tÃ¡i táº¡o. Má»™t siÃªu mÃ¡y tÃ­nh cáº§n hack nÃ£o Ä‘Ã n cÃ¡ nhÃ  mÃ¬nh xem 1 giÃ¢y tiáº¿p theo nÃ³ á»Ÿ Ä‘Ã¢u, tÆ° tháº¿ nhÆ° nÃ o ^^. ğŸ¦ˆ

Vá» tÃ­nh Ä‘á»“ng Ä‘á»u thÃ¬ mÃ¬nh cÃ³ test qua káº¿t quáº£ khi chuyá»ƒn tá»« hash string sang thÃ nh sá»‘ cÃ³ range 1-10 tháº¥y khÃ¡ á»•n.

NÃ³i chung lÃ  cÃ¡ nhÃ¢n tháº¥y thoáº£ mÃ£n, tá»« nay mÃ¬nh sáº½ Ã¡p dá»¥ng vÃ o cÃ¡c game cÅ©ng nhÆ° server cá»§a mÃ¬nh. CÃ¡c gamer sáº½ Ä‘Æ°á»£c chÆ¡i bá»i trong má»™t mÃ´i trÆ°á»ng liÃªm chÃ­nh trong sáº¡ch, khÃ´ng thao tÃºng káº¿t quáº£, trá»« tháº±ng nÃ o mÃ¬nh ghÃ©t. ğŸ˜ˆ